#!/bin/sh

# ステージングされた.cline以下のファイルの変更をチェック
if git diff --cached --name-only | grep "^\.cline/" > /dev/null; then
    echo "📝 .clineディレクトリ内のファイルが変更されました。gen:clineを実行します..."
    # npm run gen:clineを実行
    npm run gen:cline || exit 1
    
    # 生成されたファイルをステージングに追加
    git add .clinerules .roomodes
    echo "✅ gen:clineの実行が完了し、生成されたファイルをステージングに追加しました"
fi

exit 0